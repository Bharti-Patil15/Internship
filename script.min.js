const products=[
  {id:1,name:"Wallet",price:3500,img:"p1.jpg"},
  {id:2,name:"Watch",price:2500,img:"p6.jpg"},
  {id:3,name:"Bag",price:1200,img:"p5.jpg"},
  {id:4,name:"Pen",price:3500,img:"p2.jpg"},
  {id:5,name:"Ear-Headphone",price:6500,img:"p3.jpg"}
];

let cart={};
const productList=document.getElementById("product-list"),
cartItems=document.getElementById("cart-items"),
cartCount=document.getElementById("cart-count"),
cartTotal=document.getElementById("cart-total"),
clearCartBtn=document.getElementById("clear-cart"),
checkoutBtn=document.getElementById("checkout");


products.forEach(p=>{
  let card=document.createElement("div");
  card.className="card";
  card.innerHTML=`<img src="${p.img}" loading="lazy" alt="${p.name}">
  <h3>${p.name}</h3><p>₹${p.price}</p>
  <button onclick="addToCart(${p.id})">Add to Cart</button>`;
  productList.appendChild(card);
});

function addToCart(id){
  if(cart[id]) cart[id].qty++;
  else{
    let p=products.find(x=>x.id===id);
    cart[id]={...p,qty:1};
  }
  updateCart();
}

function removeFromCart(id){
  if(cart[id]){
    cart[id].qty--;
    if(cart[id].qty<=0) delete cart[id];
    updateCart();
  }
}

function updateCart(){
  cartItems.innerHTML="";
  let total=0,count=0;
  Object.values(cart).forEach(item=>{
    total+=item.price*item.qty;
    count+=item.qty;
    let div=document.createElement("div");
    div.className="cart-item";
    div.innerHTML=`${item.name} - ₹${item.price} 
    <span>Qty: ${item.qty}</span>
    <button onclick="addToCart(${item.id})">+</button>
    <button onclick="removeFromCart(${item.id})">-</button>`;
    cartItems.appendChild(div);
  });
  cartCount.innerText=count;
  cartTotal.innerText="Total: ₹"+total;
}


clearCartBtn.addEventListener("click",()=>{
  cart={};
  updateCart();
});


checkoutBtn.addEventListener("click",()=>{
  if(Object.keys(cart).length===0) alert("Your cart is empty!");
  else{
    alert("Checkout successful! Your order of ₹"+Object.values(cart).reduce((sum,i)=>sum+i.price*i.qty,0)+" has been placed.");
    cart={};
    updateCart();
  }
});
